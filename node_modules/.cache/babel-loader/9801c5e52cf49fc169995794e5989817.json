{"ast":null,"code":"import _regeneratorRuntime from\"/home/arcanjolevi/Documents/www/react-gh-pages/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/arcanjolevi/Documents/www/react-gh-pages/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/arcanjolevi/Documents/www/react-gh-pages/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{LocationContext}from\"../../contexts/Location\";import carIcon from\"../../assets/car.png\";import{useContext}from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import api from\"../../services/api\";import{getElapsedTime}from\"../../utils/time\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function VehiclesList(_ref){var content=_ref.content;var _useContext=useContext(LocationContext),setCordsOnFocus=_useContext.setCordsOnFocus;return/*#__PURE__*/_jsx(\"div\",{id:\"scroll-zone\",children:/*#__PURE__*/_jsx(\"ul\",{id:\"vehicles-list\",children:content.map(function(i){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return setCordsOnFocus(i.driverId);},children:[/*#__PURE__*/_jsx(\"img\",{src:carIcon,alt:\"carIcon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:i.driverName}),/*#__PURE__*/_jsx(Last,{driverId:i.driverId})]}),/*#__PURE__*/_jsx(\"strong\",{children:\"90km/h\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-ball\"})]},i.driverId);})})});}function Last(_ref2){var driverId=_ref2.driverId;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),lasCord=_useState2[0],setLastCord=_useState2[1];var getDriverLocationTime=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"last_coordinate/driver_id=\".concat(id));case 2:result=_context.sent;if(result){setLastCord(getElapsedTime(result.data[0].timestamp));}else{setLastCord(\"indefinido\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getDriverLocationTime(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){getDriverLocationTime(driverId);},[driverId]);return/*#__PURE__*/_jsx(\"p\",{children:\"\\xDAltima atualiza\\xE7\\xE3o: \".concat(lasCord)});}","map":{"version":3,"sources":["/home/arcanjolevi/Documents/www/react-gh-pages/src/Components/fleetStatus/VehiclesList.tsx"],"names":["LocationContext","carIcon","useContext","useEffect","useState","api","getElapsedTime","VehiclesList","content","setCordsOnFocus","map","i","driverId","driverName","Last","lasCord","setLastCord","getDriverLocationTime","id","get","result","data","timestamp"],"mappings":"4eAAA,OAAsBA,eAAtB,KAA6C,yBAA7C,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CACA,OAASC,cAAT,KAA+B,kBAA/B,C,wFAMA,MAAO,SAASC,CAAAA,YAAT,MAA2C,IAAnBC,CAAAA,OAAmB,MAAnBA,OAAmB,CAChD,gBAA4BN,UAAU,CAACF,eAAD,CAAtC,CAAQS,eAAR,aAAQA,eAAR,CAEA,mBACE,YAAK,EAAE,CAAC,aAAR,uBACE,WAAI,EAAE,CAAC,eAAP,UACGD,OAAO,CAACE,GAAR,CAAY,SAACC,CAAD,CAAO,CAClB,mBACE,YAAI,OAAO,CAAE,yBAAMF,CAAAA,eAAe,CAACE,CAAC,CAACC,QAAH,CAArB,EAAb,wBACE,YAAK,GAAG,CAAEX,OAAV,CAAmB,GAAG,CAAC,SAAvB,EADF,cAEE,aAAK,SAAS,CAAC,MAAf,wBACE,oBAAKU,CAAC,CAACE,UAAP,EADF,cAEE,KAAC,IAAD,EAAM,QAAQ,CAAEF,CAAC,CAACC,QAAlB,EAFF,GAFF,cAME,kCANF,cAOE,YAAK,SAAS,CAAC,aAAf,EAPF,GAAqDD,CAAC,CAACC,QAAvD,CADF,CAWD,CAZA,CADH,EADF,EADF,CAmBD,CAED,QAASE,CAAAA,IAAT,OAAkD,IAAlCF,CAAAA,QAAkC,OAAlCA,QAAkC,CAChD,cAA+BR,QAAQ,CAAC,EAAD,CAAvC,wCAAOW,OAAP,eAAgBC,WAAhB,eAEA,GAAMC,CAAAA,qBAAqB,2FAAG,iBAAOC,EAAP,mJACPb,CAAAA,GAAG,CAACc,GAAJ,qCAAqCD,EAArC,EADO,QACtBE,MADsB,eAE5B,GAAIA,MAAJ,CAAY,CACVJ,WAAW,CAACV,cAAc,CAACc,MAAM,CAACC,IAAP,CAAY,CAAZ,EAAeC,SAAhB,CAAf,CAAX,CACD,CAFD,IAEO,CACLN,WAAW,CAAC,YAAD,CAAX,CACD,CAN2B,sDAAH,kBAArBC,CAAAA,qBAAqB,6CAA3B,CASAd,SAAS,CAAC,UAAM,CACdc,qBAAqB,CAACL,QAAD,CAArB,CACD,CAFQ,CAEN,CAACA,QAAD,CAFM,CAAT,CAIA,mBAAO,0DAA2BG,OAA3B,GAAP,CACD","sourcesContent":["import { DriverProps, LocationContext } from \"../../contexts/Location\";\nimport carIcon from \"../../assets/car.png\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport api from \"../../services/api\";\nimport { getElapsedTime } from \"../../utils/time\";\n\ntype Params = {\n  content: DriverProps[];\n};\n\nexport function VehiclesList({ content }: Params) {\n  const { setCordsOnFocus } = useContext(LocationContext);\n\n  return (\n    <div id=\"scroll-zone\">\n      <ul id=\"vehicles-list\">\n        {content.map((i) => {\n          return (\n            <li onClick={() => setCordsOnFocus(i.driverId)} key={i.driverId}>\n              <img src={carIcon} alt=\"carIcon\" />\n              <div className=\"text\">\n                <h4>{i.driverName}</h4>\n                <Last driverId={i.driverId} />\n              </div>\n              <strong>90km/h</strong>\n              <div className=\"status-ball\"></div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n\nfunction Last({ driverId }: { driverId: string }) {\n  const [lasCord, setLastCord] = useState(\"\");\n\n  const getDriverLocationTime = async (id: string) => {\n    const result = await api.get(`last_coordinate/driver_id=${id}`);\n    if (result) {\n      setLastCord(getElapsedTime(result.data[0].timestamp));\n    } else {\n      setLastCord(\"indefinido\");\n    }\n  };\n\n  useEffect(() => {\n    getDriverLocationTime(driverId);\n  }, [driverId]);\n\n  return <p>{`Última atualização: ${lasCord}`}</p>;\n}\n"]},"metadata":{},"sourceType":"module"}